<ion-header>
  <ion-toolbar>
    <ion-title>
      Welcome back !
    </ion-title>
    <ion-buttons slot="end">
      <img (click)="fileInput.click()" style="max-height: 30px;" [src]="fireService.currentlySignedInUserImageURL" alt="">
      <input (change)="fireService.updateUserImage($event)" hidden #fileInput type="file">
      <ion-button style="margin: 20px" (click)="fireService.signOut()">
        <ion-icon style="color: #84502B" name="log-out-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<div style="display: grid;
  grid-template-columns: repeat(12, auto);
  grid-auto-rows: 1fr;"
     *ngIf="fireService.auth.currentUser==null">
  <div style="text-align: center; grid-column: 4/10; grid-row: 4/12;">
    <div class="logo">
      <div class="css-1vs2kf0"><div style="transform: scale(1);"><svg width="267.4800109863281" height="91.00844661360826" viewBox="0 0 350 119.08537089297117" class="css-1j8o68f"><defs id="SvgjsDefs4239"><linearGradient id="SvgjsLinearGradient4244"><stop id="SvgjsStop4245" stop-color="#834f2a" offset="0"></stop><stop id="SvgjsStop4246" stop-color="#dba173" offset="0.5"></stop><stop id="SvgjsStop4247" stop-color=" #834F2A" offset="1"></stop></linearGradient></defs><g id="SvgjsG4240" featurekey="symbolFeature-0" transform="matrix(1.0720672052129268,0,0,1.0720672052129268,121.85550063261388,-28.945814540749023)" fill="#b17a50"><path xmlns="http://www.w3.org/2000/svg" d="M63.08,33.979c-1.294,0-2.562,0.089-3.791,0.258c-0.1,0.014-0.186,0.076-0.229,0.166c-0.044,0.09-0.039,0.196,0.012,0.283  c1.439,2.441,2.265,5.152,2.265,8.012c0,7.441-5.48,13.959-13.497,17.124c-0.1,0.039-0.171,0.128-0.187,0.233  c-0.017,0.105,0.024,0.212,0.107,0.278c3.334,2.688,7.905,4.497,13.04,4.914c0.095,0.008,0.181,0.053,0.241,0.125  c0.06,0.072,0.088,0.166,0.078,0.26c-0.331,3.059-0.961,6.038-1.298,7.51c-0.033,0.144,0.027,0.293,0.152,0.372  c0.124,0.079,0.285,0.071,0.401-0.02c4.522-3.521,7.453-6.944,8.806-8.684c0.073-0.094,0.175-0.159,0.291-0.187  c8.432-2.025,14.536-7.952,14.536-14.95C84.008,41.006,74.638,33.979,63.08,33.979z"></path><path xmlns="http://www.w3.org/2000/svg" d="M57.85,42.697C57.85,34.028,48.479,27,36.922,27c-11.559,0-20.93,7.028-20.93,15.697c0,6.997,6.106,12.927,14.538,14.952  c0.114,0.027,0.217,0.094,0.29,0.187c1.354,1.735,4.284,5.159,8.807,8.68c0.116,0.091,0.277,0.099,0.402,0.019  c0.124-0.079,0.186-0.228,0.152-0.372c-0.339-1.471-0.97-4.447-1.301-7.507c-0.01-0.094,0.019-0.188,0.078-0.26  c0.061-0.072,0.146-0.118,0.24-0.125C49.682,57.415,57.85,50.785,57.85,42.697z"></path></g><g id="SvgjsG4241" featurekey="nameFeature-0" transform="matrix(1.6167775633204868,0,0,1.6167775633204868,-3.880265149747664,53.96157261602738)" fill="url(#SvgjsLinearGradient4244)"><path d="M28.2 10.2 c0.04 -0.08 0.24 -0.2 0.32 -0.2 l2.56 0 l0 30 l-1.64 0 c-0.24 0 -0.44 -0.2 -0.44 -0.44 l0 -26.88 s-9.2 16.44 -10.76 19.16 c-0.12 0.2 -0.4 0.36 -0.64 0.36 l-1.72 0 c-0.24 0 -0.56 -0.16 -0.68 -0.36 l-10.72 -19.16 l0 26.88 c0 0.24 -0.2 0.44 -0.44 0.44 l-1.64 0 l0 -30 l2.56 0 c0.08 0 0.28 0.12 0.32 0.2 l11.48 20.2 z M46.88 40.28 l-6.04 0 c-2.76 0 -4.96 -2.24 -4.96 -5 l0 -10.52 c0 -2.76 2.2 -5.04 4.96 -5.04 l6.04 0 c2.72 0 4.92 2.28 4.92 5.04 l0 10.52 c0 2.76 -2.2 5 -4.92 5 z M46.88 21.4 l-6.04 0 c-1.76 0 -3.16 1.44 -3.16 3.2 l0 10.84 c0 1.76 1.4 3.16 3.16 3.16 l6.04 0 c1.72 0 3.12 -1.4 3.12 -3.16 l0 -10.84 c0 -1.76 -1.4 -3.2 -3.12 -3.2 z M70.08 33.04 c0 -0.24 -0.2 -0.52 -0.4 -0.56 l-12.48 -4.48 c-0.6 -0.2 -1.08 -0.88 -1.08 -1.52 l0 -2 c0 -2.76 2.2 -4.48 4.96 -4.48 l9.2 0 l0 1.2 c0 0.24 -0.2 0.44 -0.44 0.44 l-8.76 0 c-1.76 0 -3.16 1.12 -3.16 2.88 l0 1.48 c0 0.24 0.2 0.48 0.4 0.56 l12.4 4.48 c0.6 0.2 1.08 0.88 1.08 1.52 l0 3.04 c0 2.8 -2.24 4.4 -4.96 4.4 l-10.76 0 l0 -1.24 c0 -0.24 0.2 -0.44 0.44 -0.44 l10.32 0 c1.72 0 3.24 -0.96 3.24 -2.68 l0 -2.6 z M85.24000000000001 38.32 c0.2 0 0.4 0.2 0.4 0.44 l0 1.24 l-3.96 0 c-2.76 0 -4.96 -2.24 -4.96 -5.04 l0 -25.04 l1.36 0 c0.24 0 0.44 0.2 0.44 0.44 l0 10.44 c0.04 -0.44 0.56 -0.76 1.12 -0.76 l4.88 0 l0 1.2 c0 0.24 -0.2 0.44 -0.44 0.44 l-5.56 0 l0 13.48 c0 1.72 1.4 3.16 3.16 3.16 l3.56 0 z M98.96000000000001 19.96 c2.76 0 4.96 2.28 4.96 5.04 l0 14.56 c0 0.24 -0.2 0.44 -0.44 0.44 l-10.04 0 c-2.76 0 -4.96 -2.24 -4.96 -5 l0 -2.08 c0 -2.8 2.2 -5.04 4.96 -5.04 l8.24 0 c0.24 0 0.4 -0.16 0.44 -0.44 l0 -2.6 c0 -1.76 -1.4 -3.2 -3.16 -3.2 l-8.36 0 c-0.2 0 -0.4 -0.2 -0.4 -0.44 l0 -1.24 l8.76 0 z M93.44 38.24 l8.68 0 l0 -8.84 c-0.08 0.08 -0.2 0.16 -0.32 0.16 l-8.36 0 c-1.76 0 -3.16 1.44 -3.16 3.2 l0 2.32 c0 1.76 1.4 3.16 3.16 3.16 z M113.64 9.920000000000002 l3.96 0 l0 1.24 c0 0.24 -0.2 0.4 -0.4 0.4 l-3.56 0 c-1.76 0 -3.16 1.44 -3.16 3.2 l0 6.04 c0.04 -0.44 0.52 -0.76 1.12 -0.76 l4.64 0 l0 1.2 c0 0.24 -0.2 0.44 -0.44 0.44 l-5.32 0 l0 17.88 c0 0.24 -0.2 0.44 -0.4 0.44 l-1.4 0 l0 -25.08 c0 -2.76 2.2 -5 4.96 -5 z M130.24 19.96 c2.76 0 4.96 2.28 4.96 5.04 l0 14.56 c0 0.24 -0.2 0.44 -0.44 0.44 l-10.04 0 c-2.76 0 -4.96 -2.24 -4.96 -5 l0 -2.08 c0 -2.8 2.2 -5.04 4.96 -5.04 l8.24 0 c0.24 0 0.4 -0.16 0.44 -0.44 l0 -2.6 c0 -1.76 -1.4 -3.2 -3.16 -3.2 l-8.36 0 c-0.2 0 -0.4 -0.2 -0.4 -0.44 l0 -1.24 l8.76 0 z M124.72 38.24 l8.68 0 l0 -8.84 c-0.08 0.08 -0.2 0.16 -0.32 0.16 l-8.36 0 c-1.76 0 -3.16 1.44 -3.16 3.2 l0 2.32 c0 1.76 1.4 3.16 3.16 3.16 z M138.6 25.04 c0 -0.28 0.24 -0.52 0.52 -0.52 l9.56 0 l0 1.12 c0 0.32 -0.24 0.56 -0.52 0.56 l-9.56 0 l0 -1.16 z M152.76000000000002 35 l0 -9.96 c0 -2.76 2.2 -5 4.96 -5 l8.2 0 l0 1.2 c0 0.24 -0.16 0.44 -0.4 0.44 l-7.8 0 c-1.76 0 -3.16 1.44 -3.16 3.2 l0 10.28 c0 1.76 1.4 3.16 3.16 3.16 l7.8 0 c0.24 0 0.4 0.2 0.4 0.44 l0 1.24 l-8.2 0 c-2.76 0 -4.96 -2.24 -4.96 -5 z M173.48000000000002 20 l7.32 0 c2.76 0 5 2.24 5 5 l0 15 l-1.28 0 c-0.32 0 -0.52 -0.24 -0.52 -0.52 l0 -14.64 c0 -1.76 -1.44 -3.16 -3.2 -3.16 l-7.76 0 c-0.4 0 -0.72 0.32 -0.72 0.68 l0 17.12 c0 0.28 -0.2 0.52 -0.52 0.52 l-1.32 0 l0 -30.04 l1.4 0 c0.24 0 0.44 0.2 0.44 0.44 l0 10.36 c0.04 -0.44 0.56 -0.76 1.16 -0.76 z M200.20000000000002 19.96 c2.76 0 4.96 2.28 4.96 5.04 l0 14.56 c0 0.24 -0.2 0.44 -0.44 0.44 l-10.04 0 c-2.76 0 -4.96 -2.24 -4.96 -5 l0 -2.08 c0 -2.8 2.2 -5.04 4.96 -5.04 l8.24 0 c0.24 0 0.4 -0.16 0.44 -0.44 l0 -2.6 c0 -1.76 -1.4 -3.2 -3.16 -3.2 l-8.36 0 c-0.2 0 -0.4 -0.2 -0.4 -0.44 l0 -1.24 l8.76 0 z M194.68 38.24 l8.68 0 l0 -8.84 c-0.08 0.08 -0.2 0.16 -0.32 0.16 l-8.36 0 c-1.76 0 -3.16 1.44 -3.16 3.2 l0 2.32 c0 1.76 1.4 3.16 3.16 3.16 z M218.48000000000002 38.32 c0.2 0 0.4 0.2 0.4 0.44 l0 1.24 l-3.96 0 c-2.76 0 -4.96 -2.24 -4.96 -5.04 l0 -25.04 l1.36 0 c0.24 0 0.44 0.2 0.44 0.44 l0 10.44 c0.04 -0.44 0.56 -0.76 1.12 -0.76 l4.88 0 l0 1.2 c0 0.24 -0.2 0.44 -0.44 0.44 l-5.56 0 l0 13.48 c0 1.72 1.4 3.16 3.16 3.16 l3.56 0 z"></path></g></svg></div></div>
    </div>


    <ion-item>
      <ion-label position="floating">Enter your Email</ion-label>
      <ion-input type="email" [(ngModel)]="email"></ion-input>
    </ion-item>


    <ion-item>
      <ion-label position="floating">Enter your password</ion-label>
      <ion-input type="{{ hide ? 'password' : 'text' }}" [(ngModel)]="password"></ion-input>
      <ion-button slot="end" fill="clear" style="color: #B17A50" (click)="hide = !hide">
        <ion-icon slot="icon-only" [name]="hide ? 'eye-off' : 'eye'"></ion-icon>
      </ion-button>
    </ion-item>



    <div class="buttonsDIV">
      <ion-button color="dark"  (click)="fireService.signIn(email, password)">Sign in</ion-button>

      <ion-button color="medium" (click)="fireService.register(email, password)">Sign up</ion-button>
    </div>
  </div>
</div>

<div *ngIf="fireService.auth.currentUser"
     style="height: calc(100% - 150px);
         display: grid;
         align-content: end;
         grid-template-columns: repeat(12, auto);
         grid-auto-rows: 50px;
         overflow-y: auto;
         overscroll-behavior-y: auto;">

  <div style="grid-column: 1 / 12" *ngFor="let m of fireService.messages">
    <div style="float: right" *ngIf="fireService.auth.currentUser.uid==m.user">
      <ion-text style="background-color: cornflowerblue; color: white; padding: 5px 10px; border-radius: 15px;">
        {{m.messageContent}}
      </ion-text> <ion-badge color="warning" *ngIf="m.hasNotBeenThroughToxicityFilterYet">!</ion-badge>
    </div>

    <div style="float: left; padding-left: 50px" *ngIf="fireService.auth.currentUser.uid!=m.user">
      <ion-text style="background-color: lightgrey; color: black; padding: 5px 12px; border-radius: 15px;">
        {{m.messageContent}}
      </ion-text>
    </div>
  </div>

  <div  *ngIf="fireService.auth.currentUser"
        style="grid-column: 1 / 12;">
    <ion-item style="padding-bottom: 20px">
      <ion-input [(ngModel)]="sendThisMessage" (keydown.enter)="sendMessage()" placeholder="Type your message  ğŸ’¬"></ion-input>
      <ion-button color="secondary" (click)="sendMessage()">Send message</ion-button>
    </ion-item>
  </div>
</div>





